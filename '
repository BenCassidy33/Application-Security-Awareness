import { constants } from "../scripts/constants.js"

const darkModeToggleButton = document.getElementById("lightDarkToggleButton")
const root = document.querySelector(':root')

let toggleState = 0
darkModeToggleButton.onclick = () => {
    toggleState = 1 - toggleState

    if (toggleState) {
        root.addStyles({
            [constants.selectors.background]: constants.white,
            [constants.selectors.text_color]: constants.black
        })

    } else {
        root.addStyles({
            [constants.selectors.background]: constants.black,
            [constants.selectors.text_color]: constants.white
        })
    }
}

function addTestBlock(top, left) {
    document.getElementById("test-block").style.top = `${top}px`
    document.getElementById("test-block").style.left = `${left ? left : window.innerWidth / 2}px`
}


// TODO: impliment scrolling behaviour

window.addEventListener('scroll', () => {
    let scrollPos = window.scrollY;
    let contentContainer = document.getElementById("content-image")
    let scrollBounds = document.getElementById("scroll-bounds");

    //let bottomBound = window.scrollY + scrollBounds.getBoundingClientRect().top
    let bottomBound = scrollBounds.offsetTop + scrollBounds.clientHeight

    contentContainer.style.transform = `translateY(${Math.min(scrollPos, bottomBound)}px)`
})


window.addEventListener('scroll', () => {
    let scrollPos = window.scrollY + window.innerHeight / 2;

    let image = document.getElementById("parallax-img")
    let imageCenter = image.offsetTop + image.clientHeight / 2
    //console.log(scrollPos, imageCenter)

    if (scrollPos < imageCenter) return;

    //console.log(scrollPos, imageCenter)

    //let translateValue = (scrollPos - imageCenter) * 0.75
    //let scaleValue = Math.min(0.4 + (translateValue) * 0.001, 1.5)

    let dy = (scrollPos - imageCenter)
    image.style.transform = `translateY(${dy})`
    console.log(dy)

    //image.style.transform = `scale(${Math.min(scaleValue, 1.5)}) translateY(${translateValue}px)`
})
